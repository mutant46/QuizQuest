{% extends 'base.html' %}
{% load widget_tweaks %} 

{% block content %}
<div class="p-5">
  <form method="POST">

    {% for hidden_field in form.hidden_fields %}
      {{ hidden_field.errors }}
      {{ hidden_field }}
    {% endfor %}


    {% csrf_token %} 
    {{ form.management_form }}
    {{ form.non_form_errors }}
    
    {% for form in form.forms %}
      <h3 class= "my-4">Question - {{ forloop.counter }}</h3>
      {% include 'base_forms/form.html' %}  
        {% if form.nested %}
            {{ form.nested.management_form }}
            <ul class="pb-3 list-style-none">
              {% for error in form.nested.non_field_errors  %}
                <li class="text-danger text-left">{{ error }}</li>
              {% endfor %}
            </ul>
            <div class="container-fluid">
              <div class="row">
            {% for nested_form in form.nested.forms %}
                  <div class="col-md-6 mb-5"> 
                    {{ nested_form.as_p }}
                  </div>
            {% endfor %}
            <hr>
                </div>
            </div>
        {% endif %}
    {% endfor %}

    <input type="submit" value="Add Questions" class="btn btn-lg bg-success mt-5 text-white">
    {% if object.total_questions >= 3  %}
        {% if object.is_private %}
        <a href="{% url 'quiz:quiz_detail' object.id object.slug %}?pwd={{ object.password }}" class="btn bg-primary text-white">Done</a>
        {% else %}
        <a href="{% url 'quiz:quiz_status' object.id object.slug %}" class=" mt-3 btn bg-primary text-white">Done</a>
        {% endif %}
    {% endif %}
  </form>
</div>

{% endblock %}